<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>å®å¯æ¢¦åŸºç¡€æ¸¸æˆ</title>
  <style>
    body { margin: 0; padding: 0; display: flex; justify-content: center; align-items: center; height: 100vh;
      background-image: url('pokemon-bg.jpg'); background-size: cover; background-position: center;
      font-family: "Segoe UI", Tahoma, Geneva, Verdana, sans-serif; transition: filter 0.3s; }
    .container { background-color: rgba(255,255,255,0.9); padding: 2rem; border-radius: 1rem;
      text-align: center; max-width: 90vw; max-height: 90vh; overflow: auto; position: relative; display: none; }
    .container.active { display: flex; flex-direction: column; align-items: center; }
    h1 { font-size: 3rem; margin-bottom: 1.5rem; color: #333; }
    button { padding: 0.8rem 2rem; font-size: 1.2rem; border: none; border-radius: 0.5rem;
      cursor: pointer; box-shadow: 0 4px 6px rgba(0,0,0,0.1); background-color: #ffcc00;
      transition: background-color 0.3s; margin: 0.5rem; }
    button:hover { background-color: #ffdd33; }
    #settings-btn { position: absolute; top: 1rem; left: 1rem; font-size: 2.5rem;
      background: none; border: none; cursor: pointer; z-index: 1000; color: #222; transition: color 0.3s; }
    #settings-btn:hover { color: #000; }
    #settings-menu { position: absolute; top: 3.5rem; left: 1rem; background-color: rgba(255,255,255,0.95);
      padding: 1rem; border-radius: 0.5rem; display: none; flex-direction: column; align-items: flex-start;
      box-shadow: 0 4px 6px rgba(0,0,0,0.1); z-index: 1000; }
    #coin-display { position: absolute; top: 1rem; right: 1rem; display: flex; align-items: center;
      background-color: rgba(255,255,255,0.8); padding: 0.5rem 1rem; border-radius: 0.5rem;
      font-size: 1.2rem; z-index: 1000; }
    .tabs { display: flex; justify-content: center; flex-wrap: wrap; margin-bottom: 1rem; }
    .tabs button { margin: 0.3rem 0.6rem; padding: 0.5rem 1rem; font-size: 1rem; background-color: #ddd; color: #333; }
    .tabs button.active { background-color: #bbb; }
    .card-grid { display: grid; grid-template-columns: repeat(3,1fr); gap: 1rem; }
    .card { width: 100px; height: 140px; background-color: #fff; border:2px solid #333;
      border-radius:0.5rem; display:flex; flex-direction: column; align-items: center; justify-content: center;
      font-size:0.8rem; box-shadow:0 2px 4px rgba(0,0,0,0.1); padding: 0.5rem; }
    .card .status { margin-top: 0.3rem; font-size: 0.7rem; color: #999; }
    #shop-button { background-color: #4CAF50; color: #fff; }
    #shop-button:hover { background-color: #66BB6A; }
    .spinner-container { position: relative; width: 200px; height: 200px; margin: 1rem auto; }
    .spinner-canvas { border-radius: 50%; display: block; transform-origin: 50% 50%; }
    .pointer { position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
      font-size: 2rem; color: red; z-index: 10; }
  </style>
</head>
<body>
  <button id="settings-btn">âš™ï¸</button>
  <div id="settings-menu">
    <button id="back-main">è¿”å›ä¸»é¡µé¢</button>
    <button id="volume-toggle">éŸ³é‡ï¼šé«˜</button>
    <button id="brightness-toggle">äº®åº¦ï¼šé«˜</button>
  </div>
  <div id="coin-display">ğŸ’° 10</div>

  <div id="main-menu" class="container active">
    <h1>å®å¯æ¢¦ä¸–ç•Œ</h1>
    <button id="start-button">å¼€å§‹æ¸¸æˆ</button>
    <button id="shop-button">è¿›å…¥å•†åº— ğŸ›’</button>
  </div>

  <div id="mode-menu" class="container">
    <h1>é€‰æ‹©æ¸¸æˆæ¨¡å¼</h1>
    <div class="tabs">
      <button id="classic-battle">ç»å…¸å¯¹æˆ˜</button>
      <button id="my-cards">æˆ‘çš„å¡ç‰‡</button>
    </div>
  </div>

  <div id="cards-view" class="container">
    <button id="cards-back">è¿”å›</button>
    <h1>æˆ‘çš„å¡ç‰‡</h1>
    <div class="tabs">
      <button data-cat="ç¨€æœ‰" class="active">ç¨€æœ‰</button>
      <button data-cat="è¶…ç¨€æœ‰">è¶…ç¨€æœ‰</button>
      <button data-cat="å²è¯—">å²è¯—</button>
      <button data-cat="ç¥è¯">ç¥è¯</button>
      <button data-cat="ä¼ å¥‡">ä¼ å¥‡</button>
    </div>
    <div class="card-grid" id="card-grid"></div>
  </div>

  <div id="shop-view" class="container">
    <button id="shop-back">è¿”å›</button>
    <h1>å•†åº—</h1>
    <div class="tabs shop-tabs">
      <button data-cat="è½¬ç›˜" class="active">è½¬ç›˜</button>
      <button data-cat="é«˜çº§è½¬ç›˜">é«˜çº§è½¬ç›˜</button>
      <button data-cat="æŠ½å¡æœº">æŠ½å¡æœº</button>
      <button data-cat="ç¢ç‰‡">ç¢ç‰‡</button>
      <button data-cat="ç‰©èµ„">ç‰©èµ„</button>
    </div>
    <div id="shop-content"></div>
  </div>

  <script>
    const dpr = window.devicePixelRatio || 1;
    let coinCount = 10;
    function updateCoins() {
      document.getElementById('coin-display').textContent = `ğŸ’° ${coinCount}`;
    }
    function showView(id) {
      document.querySelectorAll('.container').forEach(c => c.classList.remove('active'));
      document.getElementById(id).classList.add('active');
      document.getElementById('coin-display').style.display = id === 'main-menu' ? 'flex' : 'none';
      updateCoins();
    }

    document.getElementById('back-main').onclick = () => showView('main-menu');
    document.getElementById('start-button').onclick = () => showView('mode-menu');
    document.getElementById('classic-battle').onclick = () => alert('è¿›å…¥ç»å…¸å¯¹æˆ˜æ¨¡å¼');
    document.getElementById('my-cards').onclick = () => showView('cards-view');
    document.getElementById('cards-back').onclick = () => showView('mode-menu');

    const cardData = {
      'ç¨€æœ‰': ['çš®å¡ä¸˜','å°ç«é¾™','å¦™è›™ç§å­','æ°å°¼é¾Ÿ','è·‘è·‘çŒª','å‡¯ç½—æ–¯','ç«æé¾™','é›·ä¸˜','æ°´è·ƒçµ','å¸ƒé²çµ',
             'å–·ç«é¾™','ä¹˜é¾™','å¤§é”¯é³„','ç­åŸºæ‹‰æ–¯','ç °å¤´å°çŒª','å¤šè¾¹å…½','å¡æ¯”å…½','ç´¢ç½—äºšå…‹','è€¿é¬¼','ä¼Šå¸ƒ'],
      'è¶…ç¨€æœ‰': ['æš´é²¤é¾™','æ°´å›','é›·å…¬','å‡¤ç‹','æ°´æ™¶ç¿¼é¾™','è¶…æ¢¦','æ´›å¥‡äºš','æ´å’ªæ‹‰','çƒˆå’¬é™†é²¨','ä»£æ¬§',
               'æ¢¦å¹»','å¡å°”å‡¯æ©','é›ªç«¥å­','è·¯å¡åˆ©æ¬§','åŸºæ ¼å°”å¾·','é›·å¸Œæ‹‰å§†','æ·æ‹‰å¥¥æ‹‰','ç›æœºé›…å¨œ','ç¥–ä¼Šå§†','ç›çº³éœ'],
      'å²è¯—': ['å¤æ‹‰é¡¿','ç›–æ¬§å¡','ç§ƒé¹°ç‹®','å·¨é‡‘æ€ª','æ‹‰å¸äºšæ–¯','é›·å¸Œæ‹‰å§†','æ°å…‹ç½—å§†','åŸºæ ¼å°”å¾·','ç´¢å°”è¿¦é›·æ¬§','éœ²å¥ˆé›…æ‹‰',
             'ç›å¤å¤š','å¡å°”å‰æ¬§å¾·','åŸºæ‹‰ç¥ˆ','é˜¿å°”å®™æ–¯','ä»£æ¬§','é…‹é›·å§†','æ‹”è‘±è‡','æ ¸èƒ½æé¾™','æ¢¦æ¢¦','æ´›æ‰˜å§†'],
      'ç¥è¯': ['é˜¿å°”å®™æ–¯','å¡å°”å‡¯æ©','åŸºæ ¼å°”å¾·','é›ªç«¥å­','è·¯å¡åˆ©æ¬§','ä»£æ¬§å¥‡å¤š','æ¢¦å¹»','åŸºæ‹‰ç¥ˆ','æ·æ‹‰å¥¥æ‹‰','ç›çº³éœ',
             'ç¥–ä¼Šå§†','ä¼Šè£´å°”å¡”å°”','å¡å£¬','æ¶‚é´‰å°åŒ ','å·«å’¸','æ¯”å…‹æå°¼','è‰¾å§†åˆ©å¤š','é…‹é›·å§†','æ‹”è‘±è‡','æ ¸èƒ½æé¾™'],
      'ä¼ å¥‡': ['è¶…æ¢¦X','è¶…çº§é—ªç”µé¸Ÿ','è¶…çº§ç«ç„°é¸Ÿ','è¶…çº§æ°´å›','å¤ªé˜³ä¼Šå¸ƒ','æœˆäº®ä¼Šå¸ƒ','çƒˆç©ºå','å›ºæ‹‰å¤š','ç›–æ¬§å¡','è£‚ç©ºåº§',
             'å¸ç‰™å¢å¡','å¸•è·¯å¥‡çŠ½','é›ªæ‹‰æ¯”','å¸ç‰™å¢å¡','å¸•è·¯å¥‡çŠ½','åŸºæ ¼å°”å¾·','å‡¤å‡°ç«','ä¸‰é¦–æ¶é¾™','æ²™å¥ˆæœµ','è¥¿ç‹„'],
    };

    function loadCards(cat) {
      const grid = document.getElementById('card-grid');
      grid.innerHTML = '';
      (cardData[cat] || []).forEach(name => {
        const div = document.createElement('div');
        div.className = 'card';
        div.innerHTML = `<div>${name}</div><div class="status">æœªæ‹¥æœ‰</div>`;
        grid.appendChild(div);
      });
    }
    document.querySelectorAll('#cards-view .tabs button').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('#cards-view .tabs button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadCards(btn.dataset.cat);
      };
    });
    loadCards('ç¨€æœ‰');

    function drawSpinner(id, items) {
      const canvas = document.getElementById(id), size = 200;
      canvas.style.width = size + 'px';
      canvas.style.height = size + 'px';
      canvas.width  = size * dpr;
      canvas.height = size * dpr;
      const ctx = canvas.getContext('2d');
      ctx.scale(dpr, dpr);
      const center = size / 2, seg = 2 * Math.PI / items.length;
      ctx.clearRect(0, 0, size, size);
      items.forEach((it, i) => {
        const start = i * seg;
        ctx.beginPath(); ctx.moveTo(center, center);
        ctx.arc(center, center, center, start, start + seg);
        ctx.closePath(); ctx.fillStyle = i % 2 ? '#fde68a' : '#fcd34d';
        ctx.fill(); ctx.stroke();
        ctx.fillStyle = '#333';
        ctx.save(); ctx.translate(center, center); ctx.rotate(start + seg / 2);
        ctx.textAlign = 'right'; ctx.fillText(it, center - 10, 0);
        ctx.restore();
      });
    }

    function loadShopCategory(cat) {
      const shopContent = document.getElementById('shop-content'); shopContent.innerHTML = '';
      if (cat === 'è½¬ç›˜') {
        const items = ['é‡‘å¸','é‡‘å¸','é‡‘å¸','ç¨€æœ‰ç¢ç‰‡','è¶…ç¨€æœ‰ç¢ç‰‡','ç¨€æœ‰ç¢ç‰‡Ã—2'];
        shopContent.innerHTML = `
          <p>åŸºç¡€è½¬ç›˜ï¼ˆ6æ ¼ï¼‰ï¼š<br>
          â€¢ æœ€å¤šå¯è·20é‡‘å¸<br>
          â€¢ ç¨€æœ‰ç¢ç‰‡Ã—1<br>
          â€¢ è¶…ç¨€æœ‰ç¢ç‰‡Ã—1<br>
          â€¢ ç¨€æœ‰ç¢ç‰‡Ã—2<br>
          å…è´¹ä¸€æ¬¡æˆ–10é‡‘ä¸€æ¬¡<br>
          ç‚¹å‡»å¼€å§‹æŠ½å–ã€‚
          </p>
          <div class="spinner-container">
            <div class="pointer">ğŸ”»</div>
            <canvas id="basic-spinner" class="spinner-canvas"></canvas>
          </div>
          <button id="spin-basic">æŠ½å–</button>
        `;
        drawSpinner('basic-spinner', items);
        document.getElementById('spin-basic').onclick = () => {
          const idx = Math.floor(Math.random() * items.length),
                segment = 360 / items.length,
                full = 360 * 3,
                target = full + idx * segment + segment / 2;
          const cvs = document.getElementById('basic-spinner');
          cvs.style.transition = 'transform 3s ease-out';
          cvs.style.transform = `rotate(${target}deg)`;
          cvs.addEventListener('transitionend', () => {
            alert(`è·å¾—ï¼š${items[idx]}`);
            cvs.style.transition = 'none'; cvs.style.transform = 'none';
            drawSpinner('basic-spinner', items);
          }, { once: true });
        };
      }
      // ...å…¶ä»–å•†åº—ç±»å‹åŒç†
    }

    document.getElementById('shop-button').onclick = () => showView('shop-view');
    document.getElementById('shop-back').onclick = () => showView('main-menu');
    document.querySelectorAll('.shop-tabs button').forEach(btn => {
      btn.onclick = () => {
        document.querySelectorAll('.shop-tabs button').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        loadShopCategory(btn.dataset.cat);
      };
    });

    document.getElementById('settings-btn').onclick = () => {
      const m = document.getElementById('settings-menu');
      m.style.display = m.style.display === 'flex' ? 'none' : 'flex';
    };
    document.getElementById('volume-toggle').onclick = e => {
      e.target.textContent = e.target.textContent.includes('é«˜') ? 'éŸ³é‡ï¼šç¦éŸ³' : 'éŸ³é‡ï¼šé«˜';
    };
    document.getElementById('brightness-toggle').onclick = e => {
      if (e.target.textContent.includes('é«˜')) {
        e.target.textContent = 'äº®åº¦ï¼šä½'; document.body.style.filter = 'brightness(0.5)';
      } else {
        e.target.textContent = 'äº®åº¦ï¼šé«˜'; document.body.style.filter = 'brightness(1)';
      }
    };
    document.addEventListener('click', e => {
      const m = document.getElementById('settings-menu');
      if (!m.contains(e.target) && e.target.id !== 'settings-btn') m.style.display = 'none';
    });
  </script>
</body>
</html>
